# AIVillage CODEX Integration Environment Template
# Copy this file to .env and configure values for your environment
# Required variables are marked with [REQUIRED]
# Optional variables have default values shown

# =============================================================================
# EVOLUTION METRICS SYSTEM
# =============================================================================

# Database Configuration [REQUIRED]
AIVILLAGE_DB_PATH=./data/evolution_metrics.db
AIVILLAGE_STORAGE_BACKEND=sqlite
# Options: sqlite, redis, file
# Default: sqlite

# Redis Configuration (Optional - only if AIVILLAGE_STORAGE_BACKEND=redis)
AIVILLAGE_REDIS_URL=redis://localhost:6379/0
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# Metrics Collection Settings
AIVILLAGE_METRICS_FLUSH_THRESHOLD=50
AIVILLAGE_METRICS_FILE=evolution_metrics.json
AIVILLAGE_LOG_DIR=./evolution_logs

# Performance Tuning
AIVILLAGE_FLUSH_INTERVAL_SECONDS=30
AIVILLAGE_MAX_BATCH_SIZE=100

# =============================================================================
# RAG PIPELINE SYSTEM
# =============================================================================

# Cache Configuration
RAG_CACHE_ENABLED=true
RAG_L1_CACHE_SIZE=128
RAG_REDIS_URL=redis://localhost:6379/1
RAG_DISK_CACHE_DIR=/tmp/rag_disk_cache

# Embedding Model Configuration [REQUIRED]
RAG_EMBEDDING_MODEL=paraphrase-MiniLM-L3-v2
RAG_CROSS_ENCODER_MODEL=cross-encoder/ms-marco-MiniLM-L-2-v2
RAG_DEVICE=cpu
# Options: cpu, cuda, mps

# Vector Store Configuration [REQUIRED]
RAG_VECTOR_DIM=384
RAG_FAISS_INDEX_PATH=./data/faiss_index
RAG_BM25_CORPUS_PATH=./data/bm25_corpus
RAG_CHUNK_STORE_PATH=./data/chunk_store

# Query Processing Settings
RAG_DEFAULT_K=10
RAG_CHUNK_SIZE=512
RAG_CHUNK_OVERLAP=50
RAG_VECTOR_TOP_K=20
RAG_KEYWORD_TOP_K=20
RAG_FINAL_TOP_K=10
RAG_RERANK_ENABLED=false
RAG_BATCH_SIZE=32

# Performance Settings
RAG_MAX_QUERY_LENGTH=1000
RAG_SIMILARITY_THRESHOLD=0.7
RAG_CACHE_TTL_HOURS=24

# =============================================================================
# P2P NETWORKING
# =============================================================================

# LibP2P Core Configuration [REQUIRED]
LIBP2P_HOST=0.0.0.0
LIBP2P_PORT=4001
LIBP2P_WEBSOCKET_PORT=4002
LIBP2P_PEER_ID_FILE=./config/peer_id
LIBP2P_PRIVATE_KEY_FILE=./config/libp2p_private_key

# mDNS Discovery Settings
MDNS_SERVICE_NAME=_aivillage._tcp
MDNS_DISCOVERY_INTERVAL=30
MDNS_TTL=120
MDNS_ENABLED=true

# Mesh Network Configuration
MESH_MAX_PEERS=50
MESH_HEARTBEAT_INTERVAL=10
MESH_CONNECTION_TIMEOUT=30
MESH_MAX_MESSAGE_SIZE=1048576
# 1MB message size limit

# Transport Configuration
MESH_ENABLE_TCP=true
MESH_ENABLE_WEBSOCKET=true
MESH_ENABLE_BLUETOOTH=false
MESH_ENABLE_WIFI_DIRECT=false
MESH_ENABLE_FILE_TRANSPORT=true

# Fallback Transport Settings
MESH_FILE_TRANSPORT_DIR=/tmp/aivillage_mesh
MESH_BLUETOOTH_UUID=12345678-1234-5678-9abc-123456789abc
MESH_WIFI_DIRECT_GROUP=aivillage_mesh

# Security Settings
MESH_TLS_ENABLED=true
MESH_PEER_VERIFICATION=true
MESH_ENCRYPTION_REQUIRED=true

# Mobile P2P Port Ranges
ANDROID_P2P_PORT_START=4000
ANDROID_P2P_PORT_END=4010
IOS_P2P_PORT_START=4010
IOS_P2P_PORT_END=4020
WIFI_DIRECT_PORT_START=4020
WIFI_DIRECT_PORT_END=4030

# =============================================================================
# DIGITAL TWIN SYSTEM
# =============================================================================

# Encryption Configuration [REQUIRED]
DIGITAL_TWIN_ENCRYPTION_KEY=REPLACE_WITH_BASE64_ENCODED_32_BYTE_KEY
DIGITAL_TWIN_VAULT_PATH=./secure/digital_twin_vault
DIGITAL_TWIN_BACKUP_ENCRYPTION=true

# Database Configuration [REQUIRED]
DIGITAL_TWIN_DB_PATH=./data/digital_twin.db
DIGITAL_TWIN_SQLITE_WAL=true
DIGITAL_TWIN_DB_TIMEOUT=30

# Privacy and Compliance [REQUIRED]
DIGITAL_TWIN_COPPA_COMPLIANT=true
DIGITAL_TWIN_FERPA_COMPLIANT=true
DIGITAL_TWIN_GDPR_COMPLIANT=true
DIGITAL_TWIN_DATA_RETENTION_DAYS=365

# Profile Management
DIGITAL_TWIN_MAX_PROFILES=10000
DIGITAL_TWIN_PROFILE_TTL_DAYS=365
DIGITAL_TWIN_SESSION_TIMEOUT_MINUTES=30
DIGITAL_TWIN_MAX_SESSIONS_PER_STUDENT=10

# Analytics and Monitoring
DIGITAL_TWIN_ANALYTICS_ENABLED=true
DIGITAL_TWIN_TELEMETRY_ENABLED=false
DIGITAL_TWIN_AUDIT_LOG_ENABLED=true

# =============================================================================
# API SERVER CONFIGURATION
# =============================================================================

# Server Ports [REQUIRED]
DIGITAL_TWIN_API_PORT=8080
EVOLUTION_METRICS_API_PORT=8081
RAG_PIPELINE_API_PORT=8082
P2P_STATUS_API_PORT=8083

# API Security
API_SECRET_KEY=REPLACE_WITH_SECURE_SECRET_KEY
API_RATE_LIMIT_PER_MINUTE=60
API_CORS_ENABLED=true
API_CORS_ORIGINS=http://localhost:3000,https://aivillage.app

# Authentication
API_AUTH_ENABLED=true
API_JWT_EXPIRY_HOURS=24
API_REFRESH_TOKEN_EXPIRY_DAYS=30

# =============================================================================
# LOGGING AND MONITORING
# =============================================================================

# Log Configuration
AIVILLAGE_LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
AIVILLAGE_LOG_FORMAT=structured
AIVILLAGE_LOG_FILE=./logs/aivillage.log
AIVILLAGE_LOG_ROTATION_SIZE=10MB
AIVILLAGE_LOG_RETENTION_DAYS=30

# Performance Monitoring
AIVILLAGE_DEBUG_MODE=false
AIVILLAGE_PROFILE_PERFORMANCE=false
AIVILLAGE_ENABLE_METRICS=true
AIVILLAGE_METRICS_INTERVAL=60

# Health Checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=5

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Weights & Biases (Optional)
WANDB_API_KEY=
WANDB_PROJECT=aivillage
WANDB_ENTITY=

# OpenAI API (Optional - for enhanced LLM features)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_MAX_TOKENS=500

# Hugging Face (Optional - for model downloads)
HUGGINGFACE_API_TOKEN=
HUGGINGFACE_CACHE_DIR=./cache/huggingface

# =============================================================================
# DEVELOPMENT/TESTING CONFIGURATION
# =============================================================================

# Environment Type [REQUIRED]
AIVILLAGE_ENV=development
# Options: development, testing, staging, production

# Testing Configuration
TEST_DB_PATH=:memory:
TEST_DISABLE_AUTH=true
TEST_MOCK_EXTERNAL_SERVICES=true
TEST_FAST_MODE=true

# Development Features
DEV_AUTO_RELOAD=true
DEV_DEBUG_TOOLBAR=false
DEV_MOCK_P2P=false
DEV_SEED_DATA=true

# =============================================================================
# MOBILE CONFIGURATION
# =============================================================================

# React Native / Mobile App
MOBILE_API_BASE_URL=http://localhost:8080
MOBILE_P2P_ENABLED=true
MOBILE_OFFLINE_MODE=true
MOBILE_SYNC_INTERVAL=300

# Mobile-Specific P2P
MOBILE_MESH_TTL=60
MOBILE_MAX_OFFLINE_MESSAGES=1000
MOBILE_BATTERY_OPTIMIZATION=true

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# TLS/SSL Configuration (Production)
TLS_CERT_FILE=
TLS_KEY_FILE=
TLS_CA_FILE=
TLS_VERIFY_PEER=true

# Security Headers
SECURITY_HSTS_ENABLED=true
SECURITY_CSP_ENABLED=true
SECURITY_FRAME_OPTIONS=DENY

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_STRATEGY=fixed-window

# =============================================================================
# RESOURCE LIMITS
# =============================================================================

# Memory Management
MAX_MEMORY_MB=2048
MAX_FAISS_MEMORY_MB=512
MAX_CACHE_MEMORY_MB=256

# Processing Limits
MAX_CONCURRENT_QUERIES=10
MAX_DOCUMENT_SIZE_MB=10
MAX_BATCH_PROCESSES=5

# Network Limits
MAX_CONNECTIONS=1000
CONNECTION_TIMEOUT=30
READ_TIMEOUT=60
WRITE_TIMEOUT=60

# =============================================================================
# BACKUP AND RECOVERY
# =============================================================================

# Backup Configuration
BACKUP_ENABLED=false
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups
BACKUP_COMPRESS=true

# Recovery Settings
AUTO_RECOVERY_ENABLED=true
RECOVERY_MAX_RETRIES=3
RECOVERY_RETRY_DELAY=5

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental Features
FEATURE_ADVANCED_ANALYTICS=false
FEATURE_MULTI_TENANT=false
FEATURE_BLOCKCHAIN_INTEGRATION=false
FEATURE_FEDERATED_LEARNING=false

# Legacy Support
LEGACY_API_SUPPORT=true
LEGACY_DATA_FORMAT=false

# Performance Features
ASYNC_PROCESSING=true
BATCH_OPTIMIZATION=true
LAZY_LOADING=true
